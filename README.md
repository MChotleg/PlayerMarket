# PlayerMarket

玩家间的中央交易市场系统，支持商品买卖、求购订单、仓库管理等功能。

## 功能特性

- 🛒 **购买市场**：浏览和购买其他玩家上架的商品
- 📦 **求购市场**：发布求购订单，等待其他玩家出售
- 🏪 **我的上架**：管理自己上架的商品（调整数量、下架）
- 📋 **我的收购**：管理自己发布的求购订单（修改数量、取消）
- 🎒 **我的仓库**：存放购买或收购的物品，支持一键取出
- 💰 **经济系统集成**：通过 Vault 支持多种经济插件
- 📱 **直观的 GUI 界面**：点击操作，无需记忆复杂命令
- 🔒 **权限管理**：基于权限节点的访问控制


## 安装方法

1. **前置依赖**：
   - 服务器需安装 [Paper](https://papermc.io/) 1.21.11+
   - 需安装 [Vault](https://www.spigotmc.org/resources/vault.34315/) 插件及任意兼容的经济插件（如 EssentialsX Economy）

2. **安装步骤**：
   - 下载 `PlayerMarket-1.0.jar` 到服务器的 `plugins/` 目录
   - 重启服务器
   - 插件会自动生成配置文件和数据库表结构


## 命令说明

| 命令 | 别名 | 描述 | 权限 |
|------|------|------|------|
| `/playermarket` | `/pm` | 打开玩家市场主界面 | `playermarket.use` |
| `/playermarket balance` | `/pm bal` | 查看个人余额 | `playermarket.use` |
| `/playermarket reload` | - | 重新加载配置文件 | `playermarket.admin` |
| `/playermarket debug` | - | 显示调试信息 | `playermarket.admin` |
| `/playermarket help` | - | 显示命令帮助 | `playermarket.use` |


## GUI 界面操作

### 主菜单
- **购买市场**：进入商品浏览界面
- **求购市场**：进入求购订单浏览界面
- **我的上架**：管理已上架的商品
- **我的收购**：管理已发布的求购订单
- **我的仓库**：查看和取出仓库物品

### 购买市场
- **左键点击商品**：查看商品详情并购买
- **上一页/下一页**：翻页浏览商品
- **返回**：返回主菜单（第一页时）或上一页

### 求购市场
- **左键点击订单**：查看订单详情并出售物品
- **上一页/下一页**：翻页浏览订单
- **返回**：返回主菜单

### 我的上架
- **左键点击商品**：调整上架数量
- **右键点击商品**：下架商品
- **返回**：返回主菜单

### 我的收购
- **左键点击订单**：
  - 未完成：修改收购数量
  - 部分完成：转移已收购物品到仓库
  - 已完成：转移物品到仓库并删除订单
- **右键点击订单**：
  - 未完成/部分完成：取消订单
  - 已完成：删除订单
- **返回**：返回主菜单

### 我的仓库
- **左键点击物品**：取出物品到背包
- **返回**：返回主菜单


## 配置说明

插件会在首次启动时生成 `plugins/PlayerMarket/config.yml` 配置文件，默认配置如下：

```yaml
# 市场设置
market:
  title: "§6玩家市场"  # GUI 标题
  items-per-page: 45    # 每页显示商品数量

# 数据库设置（使用内置 SQLite，无需修改）
database:
  type: "sqlite"
  file: "playermarket.db"
```


## 权限节点

| 权限节点 | 描述 | 默认 |
|---------|------|------|
| `playermarket.use` | 使用玩家市场的基本权限 | 所有玩家 |
| `playermarket.admin` | 执行管理命令（reload、debug）的权限 | OP |


## 依赖项

- **Paper API**：1.21.11+
- **Vault API**：1.7+
- **经济插件**：如 EssentialsX Economy、CMI Economy 等


## 命令快捷方式

- `/sell <数量> <单价>`：快速上架手中物品到购买市场
- `/pur <数量> <单价>`：快速发布求购订单（求购物品为手中物品）


## 常见问题

### Q: 购买商品后物品在哪里？
A: 购买的物品会自动存入 **我的仓库**，需手动取出。

### Q: 求购订单完成后物品在哪里？
A: 收购的物品会自动存入 **我的仓库**，需手动取出。

### Q: 经济系统不可用怎么办？
A: 请确保已安装 Vault 插件和兼容的经济插件，并正确配置。

### Q: 权限不足怎么办？
A: 联系服务器管理员为您分配 `playermarket.use` 权限。


## 开发者信息

- **项目结构**：
  - `src/main/java/org/playermarket/`：主源码目录
  - `src/main/resources/`：配置文件和资源
- **构建工具**：Gradle
- **编译命令**：`./gradlew build`
- **输出文件**：`build/libs/PlayerMarket-1.0.jar`


## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。


## 更新日志

### v1.0
- ✨ 初始版本发布
- 🛒 购买市场功能
- 📦 求购市场功能
- 🏪 我的上架管理
- 📋 我的收购管理
- 🎒 我的仓库系统
- 💰 Vault 经济系统集成
- 📱 完整 GUI 界面
- 🔒 权限管理系统